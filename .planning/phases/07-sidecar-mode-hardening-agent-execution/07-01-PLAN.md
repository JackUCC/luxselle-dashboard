---
phase: 07-sidecar-mode-hardening-agent-execution
plan: "01"
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/sidecar/QuickCheck.tsx
  - src/components/sidecar/SidecarView.tsx
  - src/pages/BuyBox/EvaluatorView.tsx
  - src/pages/Inventory/InventoryView.tsx
  - src/pages/Invoices/InvoicesView.tsx
  - src/LuxselleApp.tsx
  - src/lib/LayoutModeContext.tsx
autonomous: true
requirements:
  - SIDE-01
  - SIDE-02
user_setup: []
must_haves:
  truths:
    - Sidecar remains usable at compact widths without horizontal-scroll blockers on critical actions.
    - Overview/Sidecar mode switching preserves route context and user intent.
  artifacts:
    - src/components/sidecar/QuickCheck.tsx
    - src/components/sidecar/SidecarView.tsx
    - src/LuxselleApp.tsx
    - src/lib/LayoutModeContext.tsx
  key_links:
    - src/lib/LayoutModeContext.tsx -> src/LuxselleApp.tsx
    - src/components/sidecar/SidecarView.tsx -> src/components/sidecar/QuickCheck.tsx
    - src/LuxselleApp.tsx -> src/pages/BuyBox/EvaluatorView.tsx
    - src/LuxselleApp.tsx -> src/pages/Inventory/InventoryView.tsx
    - src/LuxselleApp.tsx -> src/pages/Invoices/InvoicesView.tsx
---

<objective>
Harden compact sidecar UX and mode-switch behavior so key workflows remain stable under narrow-width usage.

Purpose: Close the highest-risk Sidecar usability and context-retention gaps first.
Output: Responsive layout fixes in sidecar and route pages, plus deterministic mode-switch handling.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-sidecar-mode-hardening-agent-execution/07-CONTEXT.md
@src/lib/LayoutModeContext.tsx
@src/LuxselleApp.tsx
@src/components/sidecar/QuickCheck.tsx
@src/components/sidecar/SidecarView.tsx
@src/pages/BuyBox/EvaluatorView.tsx
@src/pages/Inventory/InventoryView.tsx
@src/pages/Invoices/InvoicesView.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Harden sidecar shell and quick-check layout for compact widths</name>
  <files>src/components/sidecar/QuickCheck.tsx, src/components/sidecar/SidecarView.tsx</files>
  <action>Audit narrow-width overflow/min-width behavior and remove layout traps that block input, tab switching, results scanning, and CTA visibility. Keep existing UX intent, but make all key interactions accessible in compact sidecar mode with no horizontal scroll dependency.</action>
  <verify>npm run typecheck</verify>
  <done>QuickCheck and SidecarView can be used end-to-end in compact mode without clipped controls or blocked actions.</done>
</task>

<task type="auto">
  <name>Task 2: Align compact behavior on evaluator, inventory, and invoices routes</name>
  <files>src/pages/BuyBox/EvaluatorView.tsx, src/pages/Inventory/InventoryView.tsx, src/pages/Invoices/InvoicesView.tsx</files>
  <action>Apply mode-aware layout adjustments for sidecar contexts while preserving Overview behavior. Ensure key action zones (primary buttons, table/list summaries, status controls) remain visible and operable for compact width scenarios.</action>
  <verify>npm run typecheck</verify>
  <done>Evaluator, Inventory, and Invoices pages are functional in sidecar mode with compact layout constraints and without overview regressions.</done>
</task>

<task type="auto">
  <name>Task 3: Preserve route and intent across mode switches</name>
  <files>src/LuxselleApp.tsx, src/lib/LayoutModeContext.tsx</files>
  <action>Ensure mode toggling and sidecar exit behavior preserves meaningful route context and query-state intent, avoiding disorienting resets. Keep URL-driven mode behavior as the single source of truth.</action>
  <verify>npm run typecheck && npm run build</verify>
  <done>Switching between Overview and Sidecar keeps users in expected route context with stable navigation behavior.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run typecheck`
- [ ] `npm run build`
- [ ] Compact sidecar smoke checks pass for Evaluator, Inventory, and Invoices routes.
</verification>

<success_criteria>

- All tasks completed.
- Sidecar compact-width blockers are removed for core actions.
- Mode switch preserves context and expected navigation outcomes.
- No Overview layout regressions introduced by sidecar-specific changes.

</success_criteria>

<output>
After completion, create `.planning/phases/07-sidecar-mode-hardening-agent-execution/07-01-SUMMARY.md`
</output>
