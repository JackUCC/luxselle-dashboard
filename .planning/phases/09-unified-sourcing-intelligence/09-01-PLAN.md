---
phase: 09-unified-sourcing-intelligence
plan: "01"
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/UnifiedIntelligence/UnifiedIntelligenceView.tsx
  - src/components/widgets/LandedCostWidget.tsx
  - src/lib/sourcingDecision.ts
  - src/lib/sourcingDecision.test.ts
autonomous: true
requirements:
  - INTEL-01
must_haves:
  truths:
    - "Unified page is description-first and runs price-check from one primary query input."
    - "Serial check is optional and uses the same description context."
    - "Landed cost is always visible on the page and can be prefilled from maxBidEur."
  artifacts:
    - src/pages/UnifiedIntelligence/UnifiedIntelligenceView.tsx
    - src/components/widgets/LandedCostWidget.tsx
  key_links:
    - src/pages/UnifiedIntelligence/UnifiedIntelligenceView.tsx -> src/components/widgets/LandedCostWidget.tsx
    - src/pages/UnifiedIntelligence/UnifiedIntelligenceView.tsx -> src/lib/serialDateDecoder.ts
    - src/pages/UnifiedIntelligence/UnifiedIntelligenceView.tsx -> src/lib/serialValuation.ts
---

<objective>
Implement the new Unified Sourcing Intelligence page that combines:

- Price Check market research and comparables
- Optional Serial Check decode and age-adjusted guidance
- Always-visible landed cost support

The user should complete the full decision workflow from a single page.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/pages/BuyBox/EvaluatorView.tsx
@src/pages/SerialCheck/SerialCheckView.tsx
@src/components/widgets/LandedCostWidget.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create UnifiedIntelligenceView using existing evaluator and serial logic</name>
  <files>src/pages/UnifiedIntelligence/UnifiedIntelligenceView.tsx</files>
  <action>Build a unified page with description-first query input, optional serial section, market research results, decision summary, and comparables. Preserve sidecar behavior by rendering SidecarView when mode is sidecar.</action>
  <verify>npm run typecheck</verify>
  <done>Unified route can run price-check and optional serial analysis from one page.</done>
</task>

<task type="auto">
  <name>Task 2: Add landed-cost prefill support</name>
  <files>src/components/widgets/LandedCostWidget.tsx</files>
  <action>Add an optional prop to prefill bid input from maxBidEur and render a concise helper caption when prefill is active.</action>
  <verify>npm run typecheck</verify>
  <done>Landed-cost widget auto-prefills bid when a max bid result is available.</done>
</task>

<task type="auto">
  <name>Task 3: Add deterministic decision helper + unit tests</name>
  <files>src/lib/sourcingDecision.ts, src/lib/sourcingDecision.test.ts</files>
  <action>Implement a pure helper that combines price-check maxBid and optional serial guidance into a recommended max pay and decision tone. Add unit tests for no-price, price-only, serial-tightening, and invalid inputs.</action>
  <verify>npm test -- src/lib/sourcingDecision.test.ts</verify>
  <done>Decision helper behavior is test-covered and deterministic.</done>
</task>

</tasks>

<verification>
- [ ] `npm run typecheck`
- [ ] `npm test -- src/lib/sourcingDecision.test.ts`
- [ ] Manual smoke: `/evaluate` can run query, optional serial, and shows landed-cost prefill.
</verification>

<success_criteria>
- Unified page provides one coherent decision flow.
- Landed-cost prefill works in overview mode.
- Existing sidecar behavior remains intact.
</success_criteria>

<output>
After completion, create `.planning/phases/09-unified-sourcing-intelligence/09-01-SUMMARY.md`
</output>
